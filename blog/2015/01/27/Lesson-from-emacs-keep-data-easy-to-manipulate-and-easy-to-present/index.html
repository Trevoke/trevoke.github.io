<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>Lesson from emacs: keep data easy to manipulate and easy to present - Seven Steps</title>
    <meta charset="utf-8" />
    <meta name="author" content="Aldric Giacomoni" />
    <meta name="description" content="A lesson from emacs about the dangers of trying to do everything at once" />
    <meta name="keywords" content="emacs, srp, coding, data" />
    <link rel="stylesheet" href="/media/css/main.css" type="text/css">
    <link rel="stylesheet" href="/media/css/prettify.css" type="text/css">
  </head>
  <body class="container">
    <div>
      <header class="masthead">
        <h1 class="masthead-title"><a href="/">Seven Steps</a></h1>
        <p>Words... words, they&#39;re all we have to go on! - Rosencrantz and Guildenstern are dead</p>
        <ul>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/tags/">Tags</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="https://github.com/trevoke">GitHub</a></li>
          <li><a href="/rss.xml">RSS</a></li>
        </ul>
        <form method="get" id="searchform" action="http://www.google.com/search">
          <input type="text" class="field" name="q" id="s" placeholder="Search">
          <input type="hidden" name="q" value="site:blog.trevoke.net">
        </form>
      </header>
    </div>

<div>
<div class="post">
<h1>Lesson from emacs: keep data easy to manipulate and easy to present</h1>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Spreadsheets</h2>
<div class="outline-text-2" id="text-1">
<p>
Spreadsheets are evil. And do you know why? Because they're too powerful. Here is the sweet spot of spreadsheets: <b>tables of related data on which calculations need to be made</b>. Here is not the sweet spot of spreadsheets: <b>everything else</b>.
</p>

<p>
Spreadsheet software is so powerful nowadays that you can make visualizations for almost anything. And some people are happy to spend a really long time creating and maintaing those, but I am WAY, WAY lazier than those people are. I've also learned that there was such a thing as the Single Responsibility Principle.
</p>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Single Responsibility Principle</h2>
<div class="outline-text-2" id="text-2">
<p>
The Single Responsibility Principle, in code, states that a class (or a function, or really any logical set of code) must have one and only one reason to change. This is very strong.
</p>

<p>
Let's take a spreadsheet which is a visualization of a schedule. This spreadsheet can change if we're going to change the color a particular scheduled item, or the dates of the scheduled item, or who's doing the scheduled thing, or the granularity or the schedule, or something around a scheduled item. Not that I'm counting, but I think that's more than one.
</p>
</div>
<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">Separation of concerns</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Separating your concerns helps with that. Among other things, a single concern is, well, a single thing, so it helps make sure there's just one reason for a set of code to change. When I'm looking at data, I've basically got three concerns:
</p>
<ol class="org-ol">
<li>Storing the data
</li>
<li>Manipulating the data
</li>
<li>Visualizing the data
</li>
</ol>

<p>
If I can find a way of storing the data in such  a way that manipulating it is about as painless as it gets, then I am much more likely to want to play with the data, and therefore I am much more likely to come to new realizations about it.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">emacs</h2>
<div class="outline-text-2" id="text-3">
<p>
Emacs is a beast with many uses, but it is <b>definitely</b> organized. And it is, of course, mostly about modifying plain-text, though it has a large support for richer formats. Many of the plain-text modes support exporting and converting to other formats, which is also a driving force behind many of the powerful use cases for emacs.
</p>
</div>
<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1">org-mode</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Enter org-mode.
Org-mode is about organizing things. It's basically an outline mode with Getting Things Done features on crack. My favorite org-mode feature to date is how it handles tables, precisely because it is such a wonderful example of the separation of concerns that I'm talking about here. Here's a small example.
</p>
</div>
<div id="outline-container-sec-3-1-1" class="outline-4">
<h4 id="sec-3-1-1">Tables</h4>
<div class="outline-text-4" id="text-3-1-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="right" />

<col  class="left" />

<col  class="right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Name</th>
<th scope="col" class="right">Age</th>
<th scope="col" class="left">Date of Birth</th>
<th scope="col" class="right">Income</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Joe</td>
<td class="right">30</td>
<td class="left"><span class="timestamp-wrapper"><span class="timestamp">&lt;1984-02-20 Mon&gt;</span></span></td>
<td class="right">84000</td>
</tr>

<tr>
<td class="left">Mark</td>
<td class="right">40</td>
<td class="left"><span class="timestamp-wrapper"><span class="timestamp">&lt;1974-04-15 Mon&gt;</span></span></td>
<td class="right">120000</td>
</tr>

<tr>
<td class="left">Sophie</td>
<td class="right">44</td>
<td class="left"><span class="timestamp-wrapper"><span class="timestamp">&lt;1970-08-28 Fri&gt;</span></span></td>
<td class="right">150000</td>
</tr>

<tr>
<td class="left">Anna</td>
<td class="right">26</td>
<td class="left"><span class="timestamp-wrapper"><span class="timestamp">&lt;1988-02-29 Mon&gt;</span></span></td>
<td class="right">160000</td>
</tr>
</tbody>
</table>

<p>
Here is how I wrote this table:
</p>

<ol class="org-ol">
<li>I typed |Name|Age|Date of Birth|Income| and then I pressed &lt;TAB&gt;
</li>
<li>I typed Joe, &lt;TAB&gt;, &lt;TAB&gt;, C-c . (Ctrl+C then the period character), which dropped me in emacs' calendar, I wrote a date and pressed enter, then &lt;TAB&gt;
</li>
<li>I typed 84000 then I pressed &lt;TAB&gt;
</li>
<li>I repeated for the next lines
</li>
<li>I wrote the last line, a formula line, to calculate how old they are today, and pressed C-u C-c C-c, which is "recalculate everything"
</li>
</ol>

<p>
And this is how it looked to me in plain text:
</p>
<pre class="example">
| Name   | Age | Date of Birth    | Income |
|--------+-----+------------------+--------|
| Joe    |  30 | &lt;1984-02-20 Mon&gt; |  84000 |
| Mark   |  40 | &lt;1974-04-15 Mon&gt; | 120000 |
| Sophie |  44 | &lt;1970-08-28 Fri&gt; | 150000 |
| Anna   |  26 | &lt;1988-02-29 Mon&gt; | 160000 |
#+TBLFM: $2=(now()-$3)/365;%d
</pre>

<p>
It is important to note that emacs' org-mode did all the row alignment for me. Honesty dictates that I mention I actually had to ask how to do the calculation <a href="https://emacs.stackexchange.com/questions/7750/org-mode-in-a-table-calculate-a-persons-age-based-on-their-birthday">here</a>, because I didn't know about the `now()` function.
</p>

<p>
But let's say I realize that the date of birth is better before the age:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="right" />

<col  class="right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Name</th>
<th scope="col" class="left">Date of Birth</th>
<th scope="col" class="right">Age</th>
<th scope="col" class="right">Income</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Joe</td>
<td class="left"><span class="timestamp-wrapper"><span class="timestamp">&lt;1984-02-20 Mon&gt;</span></span></td>
<td class="right">30</td>
<td class="right">84000</td>
</tr>

<tr>
<td class="left">Mark</td>
<td class="left"><span class="timestamp-wrapper"><span class="timestamp">&lt;1974-04-15 Mon&gt;</span></span></td>
<td class="right">40</td>
<td class="right">120000</td>
</tr>

<tr>
<td class="left">Sophie</td>
<td class="left"><span class="timestamp-wrapper"><span class="timestamp">&lt;1970-08-28 Fri&gt;</span></span></td>
<td class="right">44</td>
<td class="right">150000</td>
</tr>

<tr>
<td class="left">Anna</td>
<td class="left"><span class="timestamp-wrapper"><span class="timestamp">&lt;1988-02-29 Mon&gt;</span></span></td>
<td class="right">26</td>
<td class="right">160000</td>
</tr>
</tbody>
</table>

<p>
Here's how much work this was:
</p>

<ol class="org-ol">
<li>Go to the Age column
</li>
<li>Press Alt+Right
</li>
<li>Watch as the column moves and the formula is updated, all for me. (note in the example below how the formula changed!)
</li>
</ol>

<pre class="example">
| Name   | Date of Birth    | Age | Income |
|--------+------------------+-----+--------|
| Joe    | &lt;1984-02-20 Mon&gt; |  30 |  84000 |
| Mark   | &lt;1974-04-15 Mon&gt; |  40 | 120000 |
| Sophie | &lt;1970-08-28 Fri&gt; |  44 | 150000 |
| Anna   | &lt;1988-02-29 Mon&gt; |  26 | 160000 |
#+TBLFM: $3=(now()-$2)/365;%d
</pre>

<p>
And now what if I want the names to be ordered alphabetically, like so?
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="right" />

<col  class="left" />

<col  class="right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Name</th>
<th scope="col" class="right">Age</th>
<th scope="col" class="left">Date of Birth</th>
<th scope="col" class="right">Income</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Anna</td>
<td class="right">26</td>
<td class="left"><span class="timestamp-wrapper"><span class="timestamp">&lt;1988-02-29 Mon&gt;</span></span></td>
<td class="right">160000</td>
</tr>

<tr>
<td class="left">Joe</td>
<td class="right">30</td>
<td class="left"><span class="timestamp-wrapper"><span class="timestamp">&lt;1984-02-20 Mon&gt;</span></span></td>
<td class="right">84000</td>
</tr>

<tr>
<td class="left">Mark</td>
<td class="right">40</td>
<td class="left"><span class="timestamp-wrapper"><span class="timestamp">&lt;1974-04-15 Mon&gt;</span></span></td>
<td class="right">120000</td>
</tr>

<tr>
<td class="left">Sophie</td>
<td class="right">44</td>
<td class="left"><span class="timestamp-wrapper"><span class="timestamp">&lt;1970-08-28 Fri&gt;</span></span></td>
<td class="right">150000</td>
</tr>
</tbody>
</table>

<pre class="example">
| Name   | Age | Date of Birth    | Income |
|--------+-----+------------------+--------|
| Anna   |  26 | &lt;1988-02-29 Mon&gt; | 160000 |
| Joe    |  30 | &lt;1984-02-20 Mon&gt; |  84000 |
| Mark   |  40 | &lt;1974-04-15 Mon&gt; | 120000 |
| Sophie |  44 | &lt;1970-08-28 Fri&gt; | 150000 |
#+TBLFM: $2=(now()-$3)/365;%d
</pre>

<p>
Simple enough! There's a function in org-mode called org-table-sort-lines that'll do it for me. And now I notice that when I made up the data for this table, as the names go up in the alphabet, so do the ages go up. Yet, even if I did not know about it, I could have just done the following:
</p>

<ol class="org-ol">
<li>Go to a row
</li>
<li>Press Alt-Up or Alt-Down to move it up or down
</li>
<li>Repeat until rows are organized as I wish
</li>
</ol>

<p>
And do you know how much work it was to transform all this plain text into the HTML you're reading? Barely any, in large part because the blogging engine I use is an emacs package.
</p>

<p>
The beautiful thing about this is: if I find that I need to reorganize my sections, I can equally simply use Alt-Up or Alt-Down to move them, along with all the text below it, up or down. And then I can re-generate the HTML.
</p>

<p>
I do the work I want to do in plain-text, because it can be made very easy to manipulate, and then we come up with a powerful visualization. The visualization is only for reading, not for manipulating. A visualization is generated, but otherwise generally static
</p>
</div>
</div>
</div>
<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2">Other examples of visualization or otherwise human-readable data, unsuited for manipulation</h3>
<div class="outline-text-3" id="text-3-2">
<p>
My favorite other example is SQL versus key-value stores. The fairly famous D3.js library is also a good example.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Back to spreadsheets</h2>
<div class="outline-text-2" id="text-4">
<p>
Use spreadsheets, but only to learn things about your data. Then find a visualization that makes sense, and generate it based on your data. You'll be much happier in the long run. I promise.
</p>
</div>
</div>

</div>
</div>
    <div>
      <div class="post-meta">
        <span title="post date" class="post-info">2015-01-27</span>
        <span title="last modification date" class="post-info">2015-01-28</span>
        <span title="tags" class="post-info"><a href="/tags/emacs/">emacs</a>, <a href="/tags/srp/">srp</a>, <a href="/tags/coding/">coding</a>, <a href="/tags/sanity/">sanity</a></span>
        <span title="author" class="post-info">Aldric Giacomoni</span>
      </div>
      <section>
        <h1>Comments</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          //var disqus_developer = 1;
          var disqus_identifier = "/blog/2015/01/27/Lesson-from-emacs-keep-data-easy-to-manipulate-and-easy-to-present";
          var disqus_url = "http://blog.trevoke.net/blog/2015/01/27/Lesson-from-emacs-keep-data-easy-to-manipulate-and-easy-to-present";
          var disqus_shortname = 'seven-steps';
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </section>
      <script src="http://code.jquery.com/jquery-latest.min.js"></script>
      <script src="https://google-code-prettify.googlecode.com/svn/loader/prettify.js"></script>
      <script src="/media/js/main.js"></script>
      <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-2479931-6']);
        _gaq.push(['_trackPageview']);
        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      </script>
      <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.x (<a href="http://orgmode.org">Org mode</a> 8.x)</p>
        <p>
          Copyright &copy; 2012 - <span id="footerYear"></span> <a href="mailto:trevoke &lt;at&gt; gmail &lt;dot&gt; com">Aldric Giacomoni</a>
          &nbsp;&nbsp;-&nbsp;&nbsp;
          Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
          <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
      </div>
    </div>

  </body>
</html>
